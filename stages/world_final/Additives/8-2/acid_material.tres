[gd_resource type="ShaderMaterial" load_steps=3 format=3 uid="uid://h47qkomxpuw2"]

[ext_resource type="Texture2D" uid="uid://cugwppxn2v01t" path="res://gfx/worldfinal/10-2/acid.png" id="1_1h78y"]

[sub_resource type="Shader" id="Shader_tyok7"]
code = "shader_type canvas_item;

uniform sampler2D sprite_sheet : filter_nearest, repeat_enable;
uniform vec2 frame_size = vec2(1.0, 1.0);
uniform uint frame_count = 1;
uniform uint frames_per_row = 1;
uniform float time_scale = 1.0;

uniform uint frame_offset = 0;
varying vec4 v_vertex_color;

void vertex() {
	v_vertex_color = COLOR;
}

void fragment() {
    uint frame = (uint(TIME * time_scale) + frame_offset) % frame_count;

    vec2 uv = (UV + vec2(
        float(frame % frames_per_row),
        float(frame / frames_per_row)
    )) / frame_size;

    COLOR = v_vertex_color * texture(sprite_sheet, uv);
}
"

[resource]
shader = SubResource("Shader_tyok7")
shader_parameter/sprite_sheet = ExtResource("1_1h78y")
shader_parameter/frame_size = Vector2(1, 8)
shader_parameter/frame_count = 8
shader_parameter/frames_per_row = 1
shader_parameter/time_scale = 6.0
shader_parameter/frame_offset = 0
